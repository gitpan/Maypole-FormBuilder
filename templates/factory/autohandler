<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title><% $config->{application_name} || "A Maypole application" %></title>
    <meta http-equiv="Content-Type" content="text/html; charset=<% $request->document_encoding %>"/>
    <link href="<% $base %>/css/maypole.css" type="text/css" rel="stylesheet" />
    <link href="<% $base %>/css/beer.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div class="content">

<h1><a href="<% $base %>/"><% $config->{application_name} || "A Maypole application" %></a></h1>

<div id="navcontainer">
<ul id="navlist">
% foreach my $table ( @{ $config->{display_tables} } ) {
<li<% ($request->model_class and $request->model_class->table eq $table  ? ' id="active"' :'') %>>\
<% $request->link( table      => $table,
                   action     => 'list',
                   additional => '',
                   label      => $table,
                   ) %>\
</li>
% }
</ul>
</div>

% $m->call_next;

</div>

% use Data::Dumper;
<pre><% Dumper( scalar( $m->request_args ) ) %></pre>

</body>
</html>

<%doc>
    <%once>
        # With all the autogenerated javascript and multiple forms in editable list mode, 
        # a bit of compression might help - remove the doc tags. 
        use Compress::Zlib;
    </%once>
    <%filter>
        if ($r->header_in( 'Accept-Encoding' ) =~ /((?:x-)?gzip)/ )
        {
            $r->content_encoding( $1 );
            $_ = Compress::Zlib::memGzip( $_ );
        } 
    </%filter>
</%doc>
